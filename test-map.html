<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Barcelona Highlights – Custom Icons</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <style>
    html, body, #map { margin:0; padding:0; height:100%; }
    .leaflet-popup-content { font:14px/1.35 system-ui, -apple-system, Segoe UI, Roboto, Arial; }
  </style>
</head>
<body>
<div id="map"></div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
const GOLD = '#C8A15E', DARK = '#111';

function makeIcon(svg, size){
  const url = 'data:image/svg+xml;charset=UTF-8,' + encodeURIComponent(svg);
  return L.icon({
    iconUrl:url,
    iconSize:[size,size],
    iconAnchor:[size/2,size],
    popupAnchor:[0,-size*0.7]
  });
}

const svg = {
  sagrada:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><g fill="${GOLD}" stroke="${DARK}" stroke-width="2"><rect x="10" y="40" width="44" height="12" rx="2"/><path d="M20 40 L24 18 L28 40 Z"/><path d="M31 40 L34 12 L37 40 Z"/><path d="M40 40 L44 18 L48 40 Z"/></g></svg>`,
  park:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><g fill="${GOLD}" stroke="${DARK}" stroke-width="2"><circle cx="28" cy="26" r="14"/><circle cx="40" cy="22" r="10"/></g></svg>`,
  batllo:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><g fill="${GOLD}" stroke="${DARK}" stroke-width="2"><path d="M10 28 Q18 20 26 24 T42 24 T54 20 L54 48 L10 48 Z"/></g></svg>`,
  pedrera:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><g fill="${GOLD}" stroke="${DARK}" stroke-width="2"><path d="M10 26 Q16 18 24 22 T36 22 T50 18 L54 48 L10 48 Z"/></g></svg>`,
  market:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><g fill="${GOLD}" stroke="${DARK}" stroke-width="2"><rect x="16" y="30" width="32" height="16" rx="2"/></g></svg>`,
  cathedral:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><g fill="${GOLD}" stroke="${DARK}" stroke-width="2"><rect x="12" y="36" width="40" height="16" rx="2"/></g></svg>`,
  beach:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><g fill="${GOLD}" stroke="${DARK}" stroke-width="2"><path d="M10 46 Q16 42 22 46 T34 46 T54 46"/></g></svg>`,
  fountain:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><g fill="${GOLD}" stroke="${DARK}" stroke-width="2"><circle cx="32" cy="36" r="4"/></g></svg>`,
  museum:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><g fill="${GOLD}" stroke="${DARK}" stroke-width="2"><rect x="18" y="42" width="28" height="8" rx="2"/></g></svg>`,
  music:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><g fill="${GOLD}" stroke="${DARK}" stroke-width="2"><circle cx="26" cy="42" r="6"/></g></svg>`,
  stadium:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><g fill="${GOLD}" stroke="${DARK}" stroke-width="2"><ellipse cx="32" cy="34" rx="20" ry="10"/></g></svg>`,
  building:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><g fill="${GOLD}" stroke="${DARK}" stroke-width="2"><rect x="18" y="18" width="28" height="30" rx="2"/></g></svg>`
};

const ICON = {};
for (const k in svg) ICON[k] = makeIcon(svg[k], 36);

const map = L.map('map').setView([41.387,2.17],12);
L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png',{maxZoom:19}).addTo(map);

const places = [
  {n:'Sagrada Família', lat:41.40363, lon:2.17436, i:ICON.sagrada, d:'Gaudí’s basilica.'},
  {n:'Park Güell', lat:41.41449, lon:2.15269, i:ICON.park, d:'Famous park with mosaics.'},
  {n:'Casa Batlló', lat:41.39164, lon:2.16487, i:ICON.batllo, d:'Modernist icon.'},
  {n:'La Pedrera (Milà)', lat:41.39537, lon:2.16184, i:ICON.pedrera, d:'Stone facade & roof chimneys.'},
  {n:'La Boqueria', lat:41.38277, lon:2.17192, i:ICON.market, d:'Historic food market.'},
  {n:'Barcelona Cathedral', lat:41.38398, lon:2.17630, i:ICON.cathedral, d:'Gothic Quarter church.'},
  {n:'Barceloneta Beach', lat:41.37669, lon:2.18962, i:ICON.beach, d:'City beach & promenade.'},
  {n:'Magic Fountain', lat:41.37126, lon:2.15189, i:ICON.fountain, d:'Night fountain show.'},
  {n:'MNAC Museum', lat:41.36874, lon:2.15301, i:ICON.museum, d:'Catalan art museum.'},
  {n:'Palau de la Música', lat:41.38702, lon:2.17410, i:ICON.music, d:'Concert hall.'},
  {n:'Camp Nou', lat:41.38090, lon:2.12282, i:ICON.stadium, d:'FC Barcelona stadium.'},
  {n:'El Alma de las Ramblas', lat:41.385116, lon:2.171445, i:ICON.building, d:'Our apartments – Santa Anna 12.'}
];

const ms = places.map(p => {
  const m = L.marker([p.lat,p.lon],{icon:p.i}).addTo(map);
  m.bindPopup(`<strong>${p.n}</strong><br>${p.d}`);
  return m;
});

map.fitBounds(L.featureGroup(ms).getBounds(),{padding:[40,40]});
</script>
</body>
</html>

